# api_yamdb
api_yamdb

### Что может этот проект
Проект API_YAMDB предоставляет возможность оставлять отзывы на имеющиеся произведения и оставлять комментарии к отзывам. Произведениями могут быть - фильмы, музыка или книги.

### Алгоритм регистрации пользователей
Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт /api/v1/auth/signup/.
YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
При желании пользователь отправляет PATCH-запрос на эндпоинт /api/v1/users/me/ и заполняет поля в своём профайле (описание полей — в документации).

### Пользовательские роли
Аноним — может просматривать описания произведений, читать отзывы и комментарии.
Аутентифицированный пользователь (user) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
Модератор (moderator) — те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.
Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
Суперюзер Django — обладет правами администратора (admin)

### Архитектура проекта - REST API
#### Основные фреймворки и библиотеки:
 • Django 3.2
 • Django Rest Framework 3.12
 • PyJWT 2.1.0
 • Simple JWT 5.3.1

### Документация

Документация API доступна по адресу: http://127.0.0.1:8000/redoc/

### Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/Daelin148/api_yamdb
```

```
cd api_yamdb
```

Cоздать и активировать виртуальное окружение:

```
python -m venv venv
```

```
source venv/Scripts/activate
```

Установить зависимости из файла requirements.txt:

```
python -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```

Выполнить миграции:

```
python manage.py migrate
```

Для удобства ознакомления с проектом подготовлен некоторый список произведений. 
Чтобы заполнить БД тестовыми произведениями выполните следующую команду:

```
python manage.py load_data
```

Запустить проект:

```
python manage.py runserver
```


### Примеры запросов:

#### Добавление произведения

```
POST /api/v1/titles/

{
  "name": "string",
  "year": 0,
  "description": "string",
  "genre": [
    "string"
  ],
  "category": "string"
}
```

#### Получение комментария к отзыву

GET /api/v1/titles/{title_id}/reviews/{review_id}/comments/{comment_id}/

```
{
  "id": 0,
  "text": "string",
  "author": "string",
  "pub_date": "2019-08-24T14:15:22Z"
}
```

## Авторы проекта:

- Соколов Андрей (Отзывы, комментарии к отзывам, рейтинг произведений) - https://github.com/Daelin148
- Валиева Виолетта (Произведения, жанры, категории) - https://github.com/ViolettaValieva
- Овчинников Антон (Регистрация и аутентификация, права доступа, работа с токеном) - https://github.com/Red-Chord